<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>YouTube Player API</title>
    <style type="text/css">
      #videoDiv {}
    </style>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
      google.load("swfobject", "2.1");
    </script>
    <script type="text/javascript">
        // Some constants
        var ST_UNSTARTED   = -1;
        var ST_ENDED       = 0;
        var ST_PLAYING     = 1;
        var ST_PAUSED      = 2;
        var ST_BUFFERING   = 3;
        var ST_VIDEO_CUED  = 5;

        // Update a particular HTML element with a new value
        function updateHTML(elmId, value) {
            document.getElementById(elmId).innerHTML = value;
        }

        // This function is called when an error is thrown by the player
        function onPlayerError(errorCode) {
            Android.jsaOnPlayerError(errorCode);
        }

        // This function is called when the player changes state
        function onPlayerStateChange(newState) {
            Android.jsaLog("State Changed....");
            Android.jsaOnPlayerStateChanged(newState);
        }

        // Display information about the current state of the player
        function notifyPlayerInfo() {
            // Also check that at least one function exists since when IE unloads the
            // page, it will destroy the SWF before clearing the interval.
            if(ytplayer && ytplayer.getDuration) {
                Android.jsaOnNotifyPlayerInfo(ytplayer.getDuration(), ytplayer.getCurrentTime());
            }
        }

        // Allow the user to set the volume from 0-100
        function setVideoVolume(volume) {
            if (ytplayer) {
                ytplayer.setVolume(Number(volume));
            }
        }

        function playVideo() {
	    Android.jsaLog("PlayVideo");
            if (ytplayer) {
                ytplayer.playVideo();
            }
        }

        function stopVideo() {
	    Android.jsaLog("StopVideo");
            if (ytplayer) {
                ytplayer.stopVideo();
            }
        }

        function pauseVideo() {
            if (ytplayer) {
                ytplayer.pauseVideo();
            }
        }

        function muteVideo() {
            if (ytplayer) {
                ytplayer.mute();
            }
        }

        function unMuteVideo() {
            if (ytplayer) {
                ytplayer.unMute();
            }
        }

        function setShuffleVideo(shuffle) {
            Android.jsaLog("- setShuffleVideo : [" + shuffle + "]");
            if (ytplayer) {
                ytplayer.setShuffle(shuffle);
            }
        }

        function prepareVideo(videoId) {
            if (ytplayer) {
                ytplayer.cueVideoById(videoId, 0, "small");
            }
        }

        // This function is automatically called by the player once it loads
        function onYouTubePlayerReady(playerId) {
            Android.jsaLog("*** onYoutubePlayerReady is called");
            Android.jsaOnPlayerReady();
            ytplayer = document.getElementById("ytPlayer");
            // This causes the updatePlayerInfo function to be called every 1000ms to
            // get fresh data from the player
            setInterval(notifyPlayerInfo, 1000);
            ytplayer.addEventListener("onStateChange", "onPlayerStateChange");
            ytplayer.addEventListener("onError", "onPlayerError");

            // 50 is default value.
            // Android java code (Policy.java) for this value.
            ytplayer.setVolume(50);
        }

        // The "main method" of this sample. Called when someone clicks "Run".
        function loadPlayer() {
            // Lets Flash from another domain call JavaScript
            var params = { allowScriptAccess: "always" };
            // The element id of the Flash embed
            var atts = { id: "ytPlayer" };
            // All of the magic handled by SWFObject (http://code.google.com/p/swfobject/)
            // set to extreamly big size to hide what is actully doing in webview to user.
            // (Full HD is enough large!)
            swfobject.embedSWF("http://www.youtube.com/apiplayer?" +
                               "version=3&enablejsapi=1&playerapiid=ytplayerapi",
                               "videoDiv", "1920", "1080", "9", null, null, params, atts);
          }

        function _run() {
            Android.jsaLog("*** Run loadPlayer");
            loadPlayer();
        }

        google.setOnLoadCallback(_run);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <table>
    <tr>
      <td><div id="videoDiv"></div></td>
    </tr>
    </table>
  </body>
</html>
