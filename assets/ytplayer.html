<!DOCTYPE html>
<html>
  <body>
    <div id="player"></div>
    <script>
        // -------------------------------------------------------------
        // Load Iframe Player API (Asynchronously)
        // -------------------------------------------------------------
        var tag = document.createElement('script');
        tag.src = "//www.youtube.com/iframe_api";
        //tag.src = "//www.youtube.com/player_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);


        // -------------------------------------------------------------
        // Main Code
        // -------------------------------------------------------------
        // Some constants
        var ST_UNSTARTED   = -1;
        var ST_ENDED       = 0;
        var ST_PLAYING     = 1;
        var ST_PAUSED      = 2;
        var ST_BUFFERING   = 3;
        var ST_VIDEO_CUED  = 5;

        var TRUE           = 1;
        var FALSE          = 0;

        var ytplayer;
        var intervId;

        // Update a particular HTML element with a new value
        function updateHTML(elmId, value) {
            document.getElementById(elmId).innerHTML = value;
        }

        function startProgressReport() {
            if (!intervId) {
                intervId = setInterval(reportProgress, 1000);
            }
        }

        function stopProgressReport() {
            if (intervId) {
                clearInterval(intervId);
                intervId = undefined;
            }
        }

        // This function is called when an error is thrown by the player
        function onPlayerError(event) {
            Android.jsaOnPlayerError(event.data);
        }

        // This function is called when the player changes state
        function onPlayerStateChange(event) {
            Android.jsaOnPlayerStateChanged(event.data);
        }

        // Display information about the current state of the player
        function reportProgress() {
            // Also check that at least one function exists since when IE unloads the
            // page, it will destroy the SWF before clearing the interval.
            if(ytplayer && ytplayer.getDuration && ytplayer.getCurrentTime) {
                Android.jsaOnReportProgress(ytplayer.getDuration(), ytplayer.getCurrentTime());
            }
        }

        // Allow the user to set the volume from 0-100
        function setVideoVolume(volume) {
            if (ytplayer) {
                ytplayer.setVolume(Number(volume));
            }
        }

        function playVideo() {
            if (ytplayer) {
                ytplayer.playVideo();
            }
        }

        function stopVideo() {
            if (ytplayer) {
                ytplayer.stopVideo();
            }
        }

        function pauseVideo() {
            if (ytplayer) {
                ytplayer.pauseVideo();
            }
        }

        function muteVideo() {
            if (ytplayer) {
                ytplayer.mute();
            }
        }

        function unMuteVideo() {
            if (ytplayer) {
                ytplayer.unMute();
            }
        }

        function seekVideo(seconds, allowSeekAhead) {
            if (ytplayer) {
                ytplayer.setVolume(Number(seconds), "true" == allowSeekAhead);
            }
        }

        function setShuffleVideo(shuffle) {
            if (ytplayer) {
                ytplayer.setShuffle(shuffle);
            }
        }

        function prepareVideo(videoId) {
            if (ytplayer) {
                ytplayer.cueVideoById(videoId, 0, "small");
            }
        }

        // This function is automatically called by the player once it loads
        function onPlayerReady(event) {
            ytplayer = event.target;
            Android.jsaOnPlayerReady();
            // This causes the updatePlayerInfo function to be called every 1000ms to
            // get fresh data from the player
            // 50 is default value.
            // Android java code (Policy.java) for this value.
            ytplayer.setVolume(50);
        }

        function onYouTubeIframeAPIReady() {
            new YT.Player('player', {
                width: '640',
                height: '390',
                playerVars: {
                    'playerapiid': 'ytplayerapi',
                    'enablejsapi': 1,
                    'autoplay': 0,
                    'controls': 0
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange,
                    'onError': onPlayerError
                }
            });
        }
    </script>
  </body>
</html>
